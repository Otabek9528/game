/* Find the Number - Game Styles v1.1 */

:root {
    --primary-blue: #4ECDC4;
    --primary-green: #95E1D3;
    --primary-yellow: #FFE66D;
    --primary-red: #FF6B6B;
    --accent-purple: #B19CD9;
    --background-light: #F7F9FC;
    --background-dark: #2C3E50;
    --white: #FFFFFF;
    --success: #6BCF7F;
    --error: #FF6B6B;
    --shadow-soft: 0 8px 30px rgba(0, 0, 0, 0.12);
    --shadow-medium: 0 12px 40px rgba(0, 0, 0, 0.18);
    --font-display: 'Fredoka One', cursive;
    --font-body: 'Nunito', sans-serif;
    --spacing-xs: 8px;
    --spacing-sm: 16px;
    --spacing-md: 24px;
    --spacing-lg: 32px;
    --speed-fast: 0.2s;
    --speed-normal: 0.3s;
}

* { margin: 0; padding: 0; box-sizing: border-box; -webkit-tap-highlight-color: transparent; }

html, body {
    width: 100%; height: 100%; overflow: hidden;
    font-family: var(--font-body);
    background: linear-gradient(135deg, #4ECDC4 0%, #556270 100%);
    color: var(--background-dark);
    -webkit-font-smoothing: antialiased;
    touch-action: none;
}

body.high-contrast { background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%); }
.hidden { opacity: 0; visibility: hidden; pointer-events: none; }

/* Loading */
.loading-screen {
    position: fixed; top: 0; left: 0; width: 100%; height: 100%;
    background: linear-gradient(135deg, #4ECDC4 0%, #556270 100%);
    display: flex; align-items: center; justify-content: center;
    z-index: 9999; transition: opacity 0.5s, visibility 0.5s;
}
.loading-content { text-align: center; animation: fadeInUp 0.5s ease; }
.loading-icon { font-size: 4rem; animation: bounce 1s ease infinite; margin-bottom: var(--spacing-md); }
.loading-title { font-family: var(--font-display); font-size: clamp(1.8rem, 7vw, 3rem); color: var(--white); text-shadow: 0 4px 20px rgba(0,0,0,0.3); margin-bottom: var(--spacing-xs); }
.loading-subtitle { font-size: 1.1rem; color: rgba(255,255,255,0.9); font-weight: 600; }

/* Game Container */
.game-container { width: 100%; height: 100%; display: flex; flex-direction: column; padding: var(--spacing-sm); transition: opacity 0.3s; }

/* Header */
.game-header { display: flex; align-items: center; justify-content: space-between; padding-bottom: var(--spacing-sm); }
.back-btn, .settings-btn { width: 44px; height: 44px; border-radius: 50%; background: rgba(255,255,255,0.2); border: none; color: var(--white); cursor: pointer; display: flex; align-items: center; justify-content: center; transition: all 0.2s; text-decoration: none; }
.back-btn:hover, .settings-btn:hover { background: rgba(255,255,255,0.3); transform: scale(1.1); }
.header-title { font-family: var(--font-display); font-size: clamp(1.2rem, 5vw, 1.6rem); color: var(--white); text-shadow: 0 2px 10px rgba(0,0,0,0.2); }

/* Instruction */
.instruction-area { text-align: center; padding: var(--spacing-sm) 0; }
.instruction-text { font-size: clamp(1rem, 3.5vw, 1.3rem); font-weight: 700; color: var(--white); text-shadow: 0 2px 8px rgba(0,0,0,0.2); }
.target-number { display: inline-block; background: var(--white); color: var(--primary-blue); font-family: var(--font-display); font-size: 1.2em; padding: 2px 12px; border-radius: 8px; margin: 0 4px; box-shadow: var(--shadow-soft); }

/* Target Area */
.target-area { display: flex; flex-direction: column; align-items: center; padding: var(--spacing-md) 0; }
.drop-zone {
    width: clamp(100px, 25vw, 140px); height: clamp(100px, 25vw, 140px);
    background: rgba(255,255,255,0.95); border: 5px dashed rgba(78,205,196,0.6);
    border-radius: 20px; display: flex; align-items: center; justify-content: center;
    transition: all 0.2s; box-shadow: var(--shadow-soft);
}
.drop-zone.drag-over { border-color: var(--success); border-style: solid; background: rgba(107,207,127,0.2); transform: scale(1.1); box-shadow: 0 0 40px rgba(107,207,127,0.5); }
.drop-zone.wrong { border-color: var(--error); animation: shake 0.4s ease; }
.drop-zone.correct { border-color: var(--success); border-style: solid; background: rgba(107,207,127,0.3); }
.drop-placeholder { font-family: var(--font-display); font-size: clamp(3rem, 12vw, 5rem); color: rgba(78,205,196,0.4); }
.drop-number { font-family: var(--font-display); font-size: clamp(3rem, 12vw, 5rem); color: var(--primary-blue); }
.drop-number.hidden, .drop-placeholder.hidden { display: none; }

/* Dots */
.dots-display { display: flex; justify-content: center; gap: 8px; margin-top: var(--spacing-sm); min-height: 30px; flex-wrap: wrap; max-width: 200px; }
.dot { width: 20px; height: 20px; background: var(--white); border-radius: 50%; box-shadow: 0 2px 8px rgba(0,0,0,0.15); opacity: 0.4; transition: all 0.2s; }
.dot.filled { background: var(--primary-yellow); opacity: 1; transform: scale(1.15); }
body:not(.show-dots) .dots-display { display: none; }

/* Progress */
.progress-container { display: flex; align-items: center; gap: var(--spacing-sm); padding: var(--spacing-sm) 0; }
.progress-container .progress-bar { flex: 1; height: 12px; background: rgba(255,255,255,0.3); border-radius: 20px; overflow: hidden; }
.progress-bar::after { content: ''; display: block; height: 100%; width: var(--progress, 0%); background: linear-gradient(90deg, var(--primary-yellow), var(--success)); border-radius: 20px; transition: width 0.4s ease; }
.progress-label { font-weight: 700; color: var(--white); font-size: 0.95rem; min-width: 50px; text-align: right; }

/* Numbers Field */
.numbers-field { flex: 1; position: relative; background: rgba(255,255,255,0.1); border-radius: 20px; margin-top: var(--spacing-sm); overflow: visible; min-height: 200px; }

/* Draggable Number */
.draggable-number {
    position: absolute; width: clamp(60px, 15vw, 75px); height: clamp(60px, 15vw, 75px);
    background: var(--white); border-radius: 16px;
    display: flex; align-items: center; justify-content: center;
    font-family: var(--font-display); font-size: clamp(1.8rem, 6vw, 2.5rem); color: var(--background-dark);
    box-shadow: var(--shadow-soft); cursor: grab; user-select: none; touch-action: none;
    transition: box-shadow 0.2s; z-index: 10;
}
.draggable-number:hover { box-shadow: var(--shadow-medium); }
.draggable-number.dragging-origin { opacity: 0.3; transform: scale(0.9); }
.draggable-number.wrong { animation: shake 0.4s ease, wrongPulse 0.4s ease; }
.draggable-number.hidden { opacity: 0; pointer-events: none; transform: scale(0); }

/* Guided mode highlight */
body.guided-mode .draggable-number.target { animation: pulseGlow 1.5s ease-in-out infinite; border: 3px solid var(--primary-yellow); }

/* Drag Clone - floats above everything */
.drag-clone {
    width: clamp(60px, 15vw, 75px); height: clamp(60px, 15vw, 75px);
    background: var(--white); border-radius: 16px;
    display: flex; align-items: center; justify-content: center;
    font-family: var(--font-display); font-size: clamp(1.8rem, 6vw, 2.5rem); color: var(--background-dark);
    box-shadow: 0 20px 60px rgba(0,0,0,0.3);
}

body.extra-large .draggable-number, body.extra-large .drag-clone { width: clamp(80px, 20vw, 110px); height: clamp(80px, 20vw, 110px); font-size: clamp(2.2rem, 8vw, 3.5rem); }
body.extra-large .drop-zone { width: clamp(130px, 30vw, 180px); height: clamp(130px, 30vw, 180px); }

/* Celebration */
.celebration-overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.4); backdrop-filter: blur(10px); z-index: 1000; display: flex; align-items: center; justify-content: center; transition: opacity 0.3s; }
#celebrationCanvas { position: absolute; top: 0; left: 0; width: 100%; height: 100%; }
.celebration-message { text-align: center; z-index: 1; background: var(--white); padding: var(--spacing-lg); border-radius: 24px; box-shadow: var(--shadow-medium); animation: zoomIn 0.4s ease; max-width: 90%; width: 320px; }
.celebration-emoji { font-size: 3.5rem; animation: bounce 0.6s ease infinite; }
.celebration-text { font-family: var(--font-display); font-size: clamp(1.4rem, 5vw, 1.8rem); color: var(--primary-blue); margin: var(--spacing-sm) 0; }
.accuracy-display { font-size: 0.95rem; color: #666; margin-bottom: var(--spacing-sm); }
.next-level-btn { background: linear-gradient(135deg, var(--primary-blue), var(--primary-green)); color: var(--white); border: none; padding: var(--spacing-sm) var(--spacing-lg); border-radius: 20px; font-size: 1.1rem; font-weight: 700; cursor: pointer; transition: all 0.2s; box-shadow: var(--shadow-soft); }
.next-level-btn:hover { transform: scale(1.05); }

/* Modal */
.modal { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.5); backdrop-filter: blur(5px); z-index: 2000; display: flex; align-items: center; justify-content: center; padding: var(--spacing-md); transition: opacity 0.3s; }
.modal-content { background: var(--white); border-radius: 24px; max-width: 480px; width: 100%; max-height: 85vh; display: flex; flex-direction: column; box-shadow: 0 20px 60px rgba(0,0,0,0.25); animation: slideInUp 0.4s ease; }
.modal-header { display: flex; justify-content: space-between; align-items: center; padding: var(--spacing-md) var(--spacing-lg); border-bottom: 2px solid var(--background-light); }
.modal-header h2 { font-family: var(--font-display); font-size: 1.4rem; color: var(--primary-blue); }
.close-modal { width: 36px; height: 36px; border-radius: 50%; border: none; background: var(--background-light); font-size: 1.5rem; color: var(--background-dark); cursor: pointer; transition: all 0.2s; display: flex; align-items: center; justify-content: center; }
.close-modal:hover { background: var(--primary-red); color: var(--white); }
.modal-body { padding: var(--spacing-lg); overflow-y: auto; flex: 1; }

.setting-group { margin-bottom: var(--spacing-lg); }
.setting-label { display: block; font-size: 1rem; font-weight: 700; color: var(--background-dark); margin-bottom: var(--spacing-sm); }
.difficulty-buttons { display: grid; grid-template-columns: repeat(3, 1fr); gap: var(--spacing-xs); }
.difficulty-btn { padding: var(--spacing-sm); border-radius: 12px; border: 3px solid var(--background-light); background: var(--white); cursor: pointer; transition: all 0.2s; text-align: center; display: flex; flex-direction: column; align-items: center; gap: 2px; }
.difficulty-btn:hover { border-color: var(--primary-blue); }
.difficulty-btn.active { border-color: var(--primary-blue); background: linear-gradient(135deg, var(--primary-blue), var(--primary-green)); color: var(--white); }
.difficulty-emoji { font-size: 1.6rem; }
.difficulty-btn span:not(.difficulty-emoji) { font-weight: 700; font-size: 0.85rem; }
.difficulty-btn small { font-size: 0.7rem; opacity: 0.8; }

.toggle-group { display: flex; flex-direction: column; gap: var(--spacing-sm); }
.toggle-item { display: flex; justify-content: space-between; align-items: center; padding: var(--spacing-sm); background: var(--background-light); border-radius: 10px; }
.toggle-item span { font-weight: 600; font-size: 0.9rem; }
.toggle-switch { position: relative; display: inline-block; width: 48px; height: 26px; }
.toggle-switch input { opacity: 0; width: 0; height: 0; }
.toggle-slider { position: absolute; cursor: pointer; top: 0; left: 0; right: 0; bottom: 0; background-color: #ccc; border-radius: 26px; transition: 0.2s; }
.toggle-slider:before { position: absolute; content: ""; height: 20px; width: 20px; left: 3px; bottom: 3px; background-color: white; border-radius: 50%; transition: 0.2s; }
input:checked + .toggle-slider { background-color: var(--primary-blue); }
input:checked + .toggle-slider:before { transform: translateX(22px); }

.stats-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: var(--spacing-sm); }
.stat-card { background: linear-gradient(135deg, var(--primary-blue), var(--accent-purple)); padding: var(--spacing-sm); border-radius: 12px; text-align: center; color: var(--white); }
.stat-value { font-family: var(--font-display); font-size: 1.6rem; }
.stat-label { font-size: 0.75rem; opacity: 0.9; }
.reset-btn { width: 100%; padding: var(--spacing-md); background: var(--primary-red); color: var(--white); border: none; border-radius: 12px; font-size: 1rem; font-weight: 700; cursor: pointer; transition: all 0.2s; }
.reset-btn:hover { background: #ff5252; }

/* Animations */
@keyframes fadeInUp { from { opacity: 0; transform: translateY(30px); } to { opacity: 1; transform: translateY(0); } }
@keyframes slideInUp { from { transform: translateY(100%); } to { transform: translateY(0); } }
@keyframes zoomIn { from { opacity: 0; transform: scale(0.5); } to { opacity: 1; transform: scale(1); } }
@keyframes bounce { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(-12px); } }
@keyframes shake { 0%, 100% { transform: translateX(0); } 20% { transform: translateX(-8px); } 40% { transform: translateX(8px); } 60% { transform: translateX(-6px); } 80% { transform: translateX(6px); } }
@keyframes pulseGlow { 0%, 100% { box-shadow: 0 0 0 0 rgba(255,230,109,0.6), var(--shadow-soft); } 50% { box-shadow: 0 0 0 12px rgba(255,230,109,0), var(--shadow-medium); } }
@keyframes wrongPulse { 0%, 100% { background: var(--white); } 50% { background: rgba(255,107,107,0.3); } }

/* Responsive */
@media (max-width: 400px) { .difficulty-buttons { grid-template-columns: 1fr; } .stats-grid { gap: var(--spacing-xs); } }
@media (orientation: landscape) and (max-height: 500px) { .target-area { padding: var(--spacing-xs) 0; } .drop-zone { width: 80px; height: 80px; } .drop-placeholder, .drop-number { font-size: 2.5rem; } .numbers-field { min-height: 150px; } }
@media (prefers-reduced-motion: reduce) { *, *::before, *::after { animation-duration: 0.01ms !important; transition-duration: 0.01ms !important; } }
a:focus-visible, button:focus-visible { outline: 4px solid var(--primary-yellow); outline-offset: 4px; }
